require_relative '../node_modules/react-native/scripts/react_native_pods'

platform :ios, '13.4'

target 'RNSentryCocoaTesterTests' do
  use_react_native!(
    :hermes_enabled => false,
  )
  pod 'RNSentry', :path => '../RNSentry.podspec'
  pod 'OCMock', '3.9.1'

  post_install do |installer|
    installer.pods_project.targets.each do |target|
      target.build_configurations.each do |config|
        current_target = config.build_settings['IPHONEOS_DEPLOYMENT_TARGET']
        minimum_target = min_ios_version_supported
        if current_target.to_f < minimum_target.to_f
          config.build_settings['IPHONEOS_DEPLOYMENT_TARGET'] = minimum_target
        end
      end
    end
  end
end
